# 🦾 Embodiment (신체 - 몸과 행동)

## 📖 개요 (Overview)
이 폴더는 로봇의 **'팔다리(Actuator)'**입니다. 
뇌가 "잡아"라고 명령하면, 실제로 모터를 어떻게 돌려야 잡을 수 있는지 계산하고 실행하는 **물리적인 노동**을 담당합니다.
가장 위험하고(물리적 충돌 가능성), 가장 정밀해야 하는 파트입니다.

---

## 📂 파일 구조 및 상세 설명 (Structure & Files)

### 1. `robot_factory.py` (로봇 공장)
- **역할**: 상황에 맞는 로봇 팔을 생성해주는 공장입니다.
- **기능**:
    - 설정이 '시뮬레이션'이면 -> 가상 로봇(PyBullet)을 내줍니다.
    - 설정이 '실제 모드'면 -> 진짜 로봇(DOFBOT) 드라이버를 내줍니다.
    - 덕분에 다른 코드는 지금 다루는 게 가짜인지 진짜인지 신경 안 써도 됩니다.

### 2. `robot_controller.py` (현장 감독)
- **역할**: 작업을 지시하고 관리하는 감독관입니다.
- **기능**:
    - `Pipeline`에서 내려온 명령("잡아!")을 받습니다.
    - 너무 위험한 명령인지 확인합니다("긴급 정지" 등).
    - 일을 순서대로 줄 세워(Queue) 하나씩 로봇에게 시킵니다.

### 3. `dofbot_driver.py` (실제 팔)
- **역할**: Yahboom DOFBOT이라는 실제 로봇 팔을 움직이는 파일입니다.
- **기능**:
    - 각 관절(서보 모터)에 몇 도(Angle)로 움직이라고 신호를 보냅니다.
    - 기구학(IK)이라는 수학을 써서 "X좌표 10으로 가"라고 하면 "1번 모터 30도, 2번 모터 45도..."로 변환합니다.

### 4. `pybullet_driver.py` (가상 팔)
- **역할**: 컴퓨터 속 가상 로봇을 움직이는 파일입니다.
- **기능**:
    - 실제 로봇과 똑같이 동작하도록 물리 엔진을 제어합니다.

---

## ⚙️ 작동 원리 (Logic Flow)

1. **명령 수신**: `Pipeline` → `RobotController` ("좌표 10, 20으로 가서 잡아라").
2. **계산**: "그 좌표로 가려면 팔을 어떻게 꺾어야 하지?" (역운동학 계산).
3. **지시**: "1번 모터 움직여, 2번 모터 움직여."
4. **실행 및 감시**: 팔이 움직이는 동안 계속 위치를 확인하며, 목표에 도착하면 "완료"라고 보고합니다.

---

## 🔗 상속 및 관계 (Relationships)
- **상위(Upstream)**: `Pipeline` (명령을 받음), `Strategy` (가끔 직접 제어를 받기도 함 - 기술 부채)
- **하위(Downstream)**: 하드웨어 장치 (Motor, Serial Port)
- **특징**: 이곳의 코드는 물리 법칙의 지배를 받습니다. 속도 제한이나 충돌 방지 로직이 필수입니다.
