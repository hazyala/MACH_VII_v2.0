# 🧠 Memory (해마 - 장기 기억 저장소)

## ⚠️ 구현 상태 (Implementation Status)
- **현재 상태**: 🚧 **미완성 (Incomplete - Half Loop)**
    - **저장(Write)**: `falkordb_manager.py`를 통해 에피소드를 저장하는 기능은 구현되어 있습니다.
    - **회상(Read)**: 뇌(`Brain`)가 과거의 기억을 불러와서 판단에 활용하는 **Recall** 기능이 아직 구현되지 않았습니다.
    - **데이터베이스**: Docker 컨테이너가 실행되지 않아 실제 저장이 실패하는 상태일 수 있습니다.

---

## 📖 개요 (Overview)
이 폴더는 로봇의 **'일기장'**입니다.
로봇이 겪은 모든 경험(행동, 결과, 감정 변화)을 그래프 데이터베이스에 저장하여, 나중에 더 똑똑한 판단을 내릴 수 있도록 돕는 것이 목표입니다.

---

## 📂 파일 구조 및 상세 설명 (Structure & Files)

### 1. `falkordb_manager.py` (기억 도서관 사서)
- **역할**: FalkorDB라는 그래프 데이터베이스와 통신하는 매니저입니다.
- **주요 로직**:
    1. **연결(Connect)**: `localhost:6379` 포트로 실행 중인 FalkorDB 서버에 접속합니다.
    2. **저장(Save)**: `pipeline.py`가 보내준 에피소드 데이터를 받아 Cypher 쿼리(DB 언어)로 변환해 저장합니다.
        - 예: `(에피소드)-[:EXECUTED]->(행동)` 관계를 생성.
    3. **조회(Query)**: (일부 구현됨) 특정 행동의 성공률을 계산하는 함수(`get_recent_success_rate`)가 포함되어 있으나, 현재 시스템에서 호출하는 곳은 없습니다.

### 2. `data/` (데이터 저장소)
- **역할**: 실제 데이터베이스 파일이 Docker Volume을 통해 저장되는 폴더입니다.
- **상태**: DB가 정상 작동하지 않으면 이 폴더는 비어있을 수 있습니다.

---

## ⚙️ 작동 원리 (Process Flow - 현 상태)

1. **행동 완료**: 로봇이 행동을 마치면 `Pipeline`이 데이터를 모읍니다.
2. **저장 시도**: `memory_manager.save_episode()`를 호출합니다.
3. **결과**:
    - DB가 켜져 있으면 -> 성공적으로 저장됨.
    - DB가 꺼져 있으면 -> 조용히 실패하고 넘어감 (현재 로그상으로는 저장된 것처럼 보일 수 있음).
4. **활용(Missing)**: 다음 행동을 결정할 때 이 데이터를 참고해야 하는데, 그 연결고리가 끊겨 있습니다.

---

## 🔗 상속 및 관계 (Relationships)
- **상위**: `Shared/Pipeline` (데이터를 입력받음)
- **하위**: `FalkorDB` (외부 데이터베이스 시스템)
- **특징**: 현재는 **'쓰기 전용(Write-Only)'** 상태입니다. 데이터는 쌓이지만(DB가 켜져 있다면), 뇌는 그것을 읽지 못합니다.
